generator client {
  provider = "prisma-client"
  output   = "../generated/prisma"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Usuario {
  id             Int       @id @default(autoincrement())
  disponible     Boolean   @default(true)
  email          String    @unique
  password       String
  fechaNacimiento DateTime
  dni            String    @unique
  nombreCompleto String
  sexo           String
  estadoCivil    String
  facturas       Factura[]
  createdAt      DateTime  @default(now())
  updatedAt      DateTime  @updatedAt
}

model Producto {
  id          Int              @id @default(autoincrement())
  disponible  Boolean          @default(true)
  nombre      String
  precioUnitario Float
  descripcion String
  stock       Int
  detalles    DetalleFactura[]
  createdAt   DateTime         @default(now())
  updatedAt   DateTime         @updatedAt
}

model Factura {
  id             Int              @id @default(autoincrement())
  disponible     Boolean          @default(true)
  fecha          DateTime
  total          Float
  nombreFantasia String
  fechaFundacion String
  usuario        Usuario          @relation(fields: [usuarioId], references: [id])
  usuarioId      Int
  detallesFactura DetalleFactura[]
  createdAt      DateTime         @default(now())
  updatedAt      DateTime         @updatedAt
}

model DetalleFactura {
  id        Int       @id @default(autoincrement())
  disponible Boolean  @default(true)
  subtotal  Float
  cantidad  Int
  factura   Factura   @relation(fields: [facturaId], references: [id])
  facturaId Int
  producto  Producto  @relation(fields: [productoId], references: [id])
  productoId Int
  createdAt DateTime  @default(now())
  updatedAt DateTime  @updatedAt
}